(function(){var a,b={},c=[["ELEMENT",/(?:\w+|\*)(?:[.#:][^\s]+|\[[^\]]+\])*$/],["CHILD_COMBINATOR",/\s*>\s*$/],["ADJACENT_SIBLING",/\s*\+\s*$/],["GENERAL_SIBLING",/\s*~\s*$/],["DESCENDANT_COMBINATOR",/\s+$/]],d=function(a){while(a=a.nextSibling)if(a.nodeType===1)break;return a},e=function(a){while(a=a.previousSibling)if(a.nodeType===1)break;return a},f=function(a){a=a.firstChild,a&&a.nodeType!==1&&(a=d(a));return a},g=function(a){a=a.replace("odd","2n+1").replace("even","2n+0").replace(/\s+/g,"").replace(/^\+?(\d+)$/,"0n+$1").replace(/^-(\d+)$/,"0n-$1");var b=a.match(/^([+-])?(\d+)?n([+-])?(\d+)?$/),c=b[1]==="-"?-(b[2]||1):+(b[2]||1),d=b[3]?b[3]==="-"?-b[4]:+b[4]:0;return{group:c,off:d}},h={"*":function(){return!0},name:function(a){a=a.toLowerCase();return function(b){return b.nodeName.toLowerCase()===a}},attr:function(a,b){return function(c){return a.test(c.getAttribute(b)||"")}},":first-child":function(b){return!e(b)&&b.parentNode!==a},":last-child":function(b){return!d(b)&&b.parentNode!==a},":nth-child":function(b){b=g(b);return function(c){if(c.parentNode!==a){var e,g=0,h=f(c.parentNode);while(h){g++;if(h===c){e=b.off-g;return b.group?!(e%b.group):!e}h=d(h)}}}},":only-child":function(b){return!e(b)&&!d(b)&&b.parentNode!==a},":root":function(a){return a.ownerDocument.documentElement===a},":lang":function(a){return function(b){do if(b.lang===a)return!0;while(b=b.parentNode)}},":empty":function(a){return!a.firstChild},":not":function(a){var b=j(a);return function(a){return!b(a)}},":first-of-type":function(b){if(b.parentNode!==a){var c=b.nodeName;while(b=e(b))if(b.nodeName===c)return;return!0}},":last-of-type":function(b){if(b.parentNode!==a){var c=b.nodeName;while(b=d(b))if(b.nodeName===c)return;return!0}},":nth-of-type":function(b){b=g(b);return function(c){if(c.parentNode!==a){var e=c.nodeName,g,h,i=0,j=f(c.parentNode);while(j){j.nodeName===e&&i++;if(j===c){h=b.off-i;return b.group?!(h%b.group):!h}j=d(j)}}}},":only-of-type":function(a){return h[":first-of-type"](a)&&h[":last-of-type"](a)},":checked":function(a){return!!a.checked||!!a.selected},":indeterminate":function(a){return!h[":checked"](a)},":enabled":function(a){return!a.disabled},":disabled":function(a){return!!a.disabled},":target":function(a){return a.id===location.hash.slice(1)}},i={CHILD_COMBINATOR:function(a){return function(b){return a(b=b.parentNode)&&b}},ADJACENT_SIBLING:function(a){return function(b){return a(b=e(b))&&b}},GENERAL_SIBLING:function(a){return function(b){while(b=e(b))if(a(b))return b}},DESCENDANT_COMBINATOR:function(a){return function(b){while(b=b.parentNode)if(a(b))return b}},NONE:function(a){return function(b){return a(b)&&b}}},j=function(a){var b,c,d,e,f,g;if(typeof a!="string"){if(a.length>1){var i=[],k=0,l=a.length;for(;k<l;k++)i.push(j(a[k]));l=i.length;return function(a){for(k=0;k<l;k++)if(!i[k](a))return;return!0}}return h[a[0]]||h.name(a[0])}switch(a[0]){case".":b="class",c="~=",d=a.slice(1);break;case"#":b="id",c="=",d=a.slice(1);break;case"[":e=a.match(/^\[([\w-]+)(?:(=|~=|\^=|\$=|\|=)([^\]]+))?\]/),b=e[1],c=e[2]||"=",d=e[3]||".+";break;case":":g=a.match(/^(:[\w-]+)\(([^)]+)\)/),g&&(a=g[1],g=g[2].replace(/^['"]|['"]$/g,""));return g?h[a](g):h[a];default:return h[a]||h.name(a)}d=d.replace(/^['"]|['"]$/g,"");switch(c){case"=":f=new RegExp("^"+d+"$");break;case"*=":f=new RegExp(d);break;case"~=":f=new RegExp("(^|\\s)"+d+"(\\s|$)");break;case"|=":f=new RegExp("(^|-)"+d+"(-|$)");break;case"^=":f=new RegExp("^"+d);break;case"$=":f=new RegExp(d+"$");break;default:throw new Error("Bad attribute operator.")}return h.attr(f,b)},k=function(a){var b=[],d=i.NONE,e,f,g,h;while(a.length)for(f=0;g=c[f++];)if(h=a.match(g[1])){a=a.slice(0,-h[0].length);if(g[0]==="ELEMENT")h=h[0].split(/(?=[\[:.#])/),e||(e=h[0]),b.push(d(j(h)));else{d=i[g[0]];break}}b=l(b),b.first=e;return b},l=function(a){return function(b){var c=0,d;while(d=a[c++])if(!(b=d(b)))return;return!0}},m=function(c){var d=0,e=[],f,g,h;if(~c.indexOf(",")){c=c.split(/,\s*(?![^\[]*["'])/);while(d<c.length)e=e.concat(m(c[d++],a));return e}c=c.replace(/^\s+|\s+$/g,""),c=c.replace(/(^|\s)(:|\[|\.|#)/g,"$1*$2"),g=b[c]||(b[c]=k(c)),h=a.getElementsByTagName(g.first);while(f=h[d++])g(f)&&e.push(f);return e},n=m,o=function(){try{Array.prototype.slice.call(document.getElementsByTagName("*"));return function(a){return Array.prototype.slice.call(a)}}catch(a){a=null;return function(a){var b=[],c=0,d=a.length;for(;c<d;c++)b.push(a[c]);return b}}}();document.querySelectorAll?m=function(b){try{return o(a.querySelectorAll(b))}catch(c){return n(b)}}:m=function(b){if(!~b.indexOf(" ")){if(b[0]==="#"&&/^#\w+$/.test(b))return[a.getElementById(b.slice(1))];if(b[0]==="."&&/^\.\w+$/.test(b))try{return o(a.getElementsByClassName(b.slice(1)))}catch(c){}if(/^\w+$/.test(b))return o(a.getElementsByTagName(b))}return n(b)};if(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));return!!a.getElementsByTagName("*")[0]}())h["*"]=function(a){if(a.nodeType===1)return!0};var p=function(c,d){a=d||document;try{return m(c)}catch(e){typeof console!="undefined"&&console.log(e.stack||e+"");return[]}};p.selectors=h,typeof module!="undefined"&&module.exports?module.exports=p:this.zest=p}).call(this)